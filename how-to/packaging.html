
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Packaging &#8212; PyAnsys Developer&#39;s Guide</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/ansys_sphinx_theme.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Logging" href="logging.html" />
    <link rel="prev" title="Contributing" href="contributing.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../overview/index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  How-To
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../packaging/index.html">
  Packaging style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../coding-style/index.html">
  Coding style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../doc-style/index.html">
  Documentation style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../abstractions/index.html">
  Abstractions
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/dev-guide" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnsys Developer's Guide</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">How-To</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Packaging</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="setting-up.html">
   Setting up your development environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="supporting-python-versions.html">
   Supporting Python versions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Packaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="logging.html">
   Logging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="documenting.html">
   Documenting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="testing.html">
   Testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="continuous-integration.html">
   Using continuous integration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="releasing.html">
   Releasing and publishing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="repository-protection.html">
   Repository protection
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specifying-dependencies">
   Specifying dependencies
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#required-dependencies">
     Required dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optional-dependencies">
     Optional dependencies
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#implementing-optional-packages-in-the-build-system">
       Implementing optional packages in the build system
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#implementing-optional-libraries-in-features">
       Implementing optional libraries in features
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dependabot">
   Dependabot
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-dependabot-yml-file">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       dependabot.yml
      </span>
     </code>
     file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dependabot-updates">
     Dependabot updates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dependabot-version-updates">
     Dependabot version updates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dependabot-security-updates">
     Dependabot security updates
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="packaging">
<h1>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline">#</a></h1>
<p>Packaging is the process for distributing software to guarantee that final users
can use it. By packaging Python libraries, it is possible to declare which
source code or binary files need to be distributed, project metadata and third
party dependencies.</p>
<p>The fundamentals of Python packaging together with the packaging style
guidelines that apply to PyAnsys projects are collected in the <a class="reference internal" href="../packaging/index.html#packaging-style"><span class="std std-ref">Packaging style</span></a> section.</p>
<section id="specifying-dependencies">
<h2>Specifying dependencies<a class="headerlink" href="#specifying-dependencies" title="Permalink to this headline">#</a></h2>
<p>It is common to take advantage of third party libraries to simplify
source code. The formal way of doing so is by specifying these third party
libraries as dependencies. There are two types of dependencies: <a class="reference internal" href="#required-dependencies"><span class="std std-ref">Required dependencies</span></a> and <a class="reference internal" href="#optional-dependencies"><span class="std std-ref">Optional dependencies</span></a>.</p>
<section id="required-dependencies">
<h3>Required dependencies<a class="headerlink" href="#required-dependencies" title="Permalink to this headline">#</a></h3>
<p>Required dependencies are third party libraries that a software requires to
properly function. If these dependencies are not installed or present, the
software does not work as expected.</p>
<p>Required dependencies need to be declared in <a class="reference internal" href="../packaging/structure.html#the-setup-py-file"><span class="std std-ref">The setup.py file</span></a> or
in <a class="reference internal" href="../packaging/structure.html#the-pyproject-toml-file"><span class="std std-ref">The pyproject.toml file</span></a>, according to the selected <a class="reference internal" href="../packaging/build-systems.html#build-system"><span class="std std-ref">Build system</span></a>:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-ZmxpdA==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-ZmxpdA==" name="ZmxpdA==" role="tab" tabindex="0">flit</button><button aria-controls="panel-0-cG9ldHJ5" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-cG9ldHJ5" name="cG9ldHJ5" role="tab" tabindex="-1">poetry</button><button aria-controls="panel-0-c2V0dXB0b29scw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-c2V0dXB0b29scw==" name="c2V0dXB0b29scw==" role="tab" tabindex="-1">setuptools</button></div><div aria-labelledby="tab-0-ZmxpdA==" class="sphinx-tabs-panel group-tab" id="panel-0-ZmxpdA==" name="ZmxpdA==" role="tabpanel" tabindex="0"><div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span><span class="w"></span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;matplotlib &gt;= 3.5.2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;numpy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-cG9ldHJ5" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-cG9ldHJ5" name="cG9ldHJ5" role="tabpanel" tabindex="0"><div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.poetry.dependencies]</span><span class="w"></span>
<span class="n">matplotlib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;^3.5.2&quot;</span><span class="w"></span>
<span class="n">numpy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-c2V0dXB0b29scw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-c2V0dXB0b29scw==" name="c2V0dXB0b29scw==" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;matplotlib &gt;= 3.5.2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;numpy&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div></div>
</section>
<section id="optional-dependencies">
<h3>Optional dependencies<a class="headerlink" href="#optional-dependencies" title="Permalink to this headline">#</a></h3>
<p>Optional dependencies are third-party libraries without which a software is not
able to execute particular features. This makes it convenient to declare
dependencies for ancillary functions such as <em>plotting</em>, <em>tests</em>, or <em>docs</em>. You
can programmatically integrate dependencies that are to be installed as optional
requirements rather than individual packages.</p>
<p>You may want to have optional packages for your PyAnsys library for a variety of
reasons, including:</p>
<ul class="simple">
<li><p><strong>Not all users want to use the feature.</strong> - For example, you might want
to make using <a class="reference external" href="https://matplotlib.org/">matplotlib</a> or <a class="reference external" href="https://docs.pyvista.org/">pyvista</a> optional if you expect your PyAnsys library is
to be used primarily for headless scripting rather than visualization.</p></li>
<li><p><strong>Not all users can install the optional package.</strong> - For certain less popular
or obscure environments, some binary wheels might not be available or compatible
with the user’s environment. For example, if a user of CentOS 6.9 needs to
have <code class="docutils literal notranslate"><span class="pre">manylinux1</span></code> but the package only supports <code class="docutils literal notranslate"><span class="pre">manylinux2014</span></code> (CentOS
7+) or newer, the user’s environment wouldn’t be able to run the PyAnsys
library.</p></li>
<li><p><strong>Reducing dependency bloat</strong> - Removing the package as a “required”
dependency reduces the number of packages to install at installation time,
speeding up the installation and reducing the possibility of dependency
conflicts. The trade-off here is that any user who wants to access features that
require the optional package must install it separately.</p></li>
</ul>
<p>If you choose to implement optional packages for your PyAnsys library, some helpful
best practices follow.</p>
<section id="implementing-optional-packages-in-the-build-system">
<h4>Implementing optional packages in the build system<a class="headerlink" href="#implementing-optional-packages-in-the-build-system" title="Permalink to this headline">#</a></h4>
<p>Here’s how to implement and use optional requirements for the three most
popular build systems:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-ZmxpdA==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-ZmxpdA==" name="ZmxpdA==" role="tab" tabindex="0">flit</button><button aria-controls="panel-1-cG9ldHJ5" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-cG9ldHJ5" name="cG9ldHJ5" role="tab" tabindex="-1">poetry</button><button aria-controls="panel-1-c2V0dXB0b29scw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-c2V0dXB0b29scw==" name="c2V0dXB0b29scw==" role="tab" tabindex="-1">setuptools</button></div><div aria-labelledby="tab-1-ZmxpdA==" class="sphinx-tabs-panel group-tab" id="panel-1-ZmxpdA==" name="ZmxpdA==" role="tabpanel" tabindex="0"><div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.optional-dependencies]</span><span class="w"></span>
<span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;matplotlib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyvista&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyside&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
<span class="n">plotting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;matplotlib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyvista&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
<span class="n">qt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyside&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>Install <code class="docutils literal notranslate"><span class="pre">package-name</span></code> with the optional <code class="docutils literal notranslate"><span class="pre">qt</span></code> packages with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pip install package-name --extras=all
</pre></div>
</div>
</div><div aria-labelledby="tab-1-cG9ldHJ5" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-cG9ldHJ5" name="cG9ldHJ5" role="tabpanel" tabindex="0"><div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="k">[tool.poetry.dependencies]</span><span class="w"></span>
<span class="n">matplotlib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;^3.5&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">true</span><span class="p">}</span><span class="w"></span>
<span class="n">pyvista</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;^0.32&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">true</span><span class="p">}</span><span class="w"></span>
<span class="n">pyside</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;^1.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">true</span><span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>

<span class="k">[tool.poetry.extras]</span><span class="w"></span>
<span class="n">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;matplotlib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyvista&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyside&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
<span class="n">plotting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;matplotlib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyvista&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
<span class="n">qt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;pyside&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>Install <code class="docutils literal notranslate"><span class="pre">package-name</span></code> with the optional <code class="docutils literal notranslate"><span class="pre">qt</span></code> packages with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>poetry install --extras &quot;plotting qt&quot;
</pre></div>
</div>
</div><div aria-labelledby="tab-1-c2V0dXB0b29scw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-c2V0dXB0b29scw==" name="c2V0dXB0b29scw==" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">extras_require</span><span class="o">=</span><span class="p">{</span>
       <span class="s1">&#39;all&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span> <span class="s1">&#39;pyvista&#39;</span><span class="p">,</span> <span class="s1">&#39;pyside&#39;</span><span class="p">],</span>
       <span class="s1">&#39;plotting&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span> <span class="s1">&#39;pyvista&#39;</span><span class="p">],</span>
       <span class="s1">&#39;qt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;pyside&#39;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Install <code class="docutils literal notranslate"><span class="pre">package-name</span></code> with the optional <code class="docutils literal notranslate"><span class="pre">qt</span></code> packages with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pip install package-name[qt]
</pre></div>
</div>
</div></div>
</section>
<section id="implementing-optional-libraries-in-features">
<h4>Implementing optional libraries in features<a class="headerlink" href="#implementing-optional-libraries-in-features" title="Permalink to this headline">#</a></h4>
<p>One of the best ways to implement an optional dependency is to execute a <em>lazy
import</em> at runtime for the feature in question. For example, if your library
has an optional dependency on <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, you can implement it with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot two numpy arrays.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x : numpy.ndarray</span>
<span class="sd">        Numpy array sized (n, ).</span>
<span class="sd">    y : numpy.ndarray</span>
<span class="sd">        Numpy array sized (n, ).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function requires ``matplotlib``.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span>
            <span class="s2">&quot;To use this feature, install &#39;matplotlib&#39; with:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;pip install matplotlib&quot;</span>
        <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement is within the method and not at the module
level. Normally this is a bad practice because it can cause runtime errors. However,
for optional features where the user isn’t expected to have the library
installed, this is one of the best ways of handling it. Otherwise, the PyAnsys
library might fail to import because the optional package might not be installed.</p>
<p>Also note how this code snippet adds a helpful <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ModuleNotFoundError">ModuleNotFoundError</a> rather
than simply allowing the error to be raised. This lets the user know that this
error is expected because the feature relies on an optional dependency.</p>
<p>If you have many methods that rely on an optional feature, you can implement a
<a class="reference external" href="https://realpython.com/primer-on-python-decorators/">decorator</a> to make it
easier to add these lazy imports and helpful error messages. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">warnings</span>


<span class="k">def</span> <span class="nf">requires_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a package is installed by importing it.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    package_name : str</span>
<span class="sd">        Name of the package.</span>
<span class="sd">    raise_error : bool, optional</span>
<span class="sd">        Raise ``ModuleNotFoundError`` if the package is not installed. The default</span>
<span class="sd">        is ``False``.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ModuleNotFoundError</span>
<span class="sd">        Raise when a package is not installed and ``raise_error=True``.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;To use the method &#39;</span><span class="si">{</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;the package &#39;</span><span class="si">{</span><span class="n">package_name</span><span class="si">}</span><span class="s2">&#39; is required.</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Install &#39;</span><span class="si">{</span><span class="n">package_name</span><span class="si">}</span><span class="s2">&#39; with:</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;pip install </span><span class="si">{</span><span class="n">package_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;ansys&#39;</span> <span class="ow">in</span> <span class="n">package_name</span> <span class="k">else</span> <span class="n">package_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">return</span>

        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">return</span> <span class="n">decorator</span>
</pre></div>
</div>
<p>You use the decorator with a method with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sz</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">sz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">sz</span><span class="p">)</span>

    <span class="nd">@requires_package</span><span class="p">(</span><span class="s1">&#39;emoo&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot the internal arrays ``_a`` and ``_b``.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method requires ``matplotlib``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_b</span><span class="p">)</span>
</pre></div>
</div>
<p>In practice, if the user does not have <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> installed, this is the
behavior that the user would expect:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_inst</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_inst</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>

<span class="go">ModuleNotFoundError: To use the method &#39;plot&#39;, the package &#39;matplotlib&#39; is required.</span>

<span class="go">Install &#39;matplotlib&#39; with:</span>
<span class="go">pip install matplotlib</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="dependabot">
<h2>Dependabot<a class="headerlink" href="#dependabot" title="Permalink to this headline">#</a></h2>
<p>Dependabot is a built-in tool which allows to keep project dependencies updated,
by informing of latest releases of the packages being used.</p>
<section id="the-dependabot-yml-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">dependabot.yml</span></code> file<a class="headerlink" href="#the-dependabot-yml-file" title="Permalink to this headline">#</a></h3>
<p>Dependabot version updates are performed by checking a <code class="docutils literal notranslate"><span class="pre">dependabot.yml</span></code>
configuration file into your repository. In this file, one should specify the
location of the project’s requirement files, so that Dependabot knows where
to look.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># To get started with Dependabot version updates, you&#39;ll need to specify which</span><span class="w"></span>
<span class="c1"># package ecosystems to update and where the package manifests are located.</span><span class="w"></span>
<span class="c1"># Please see the documentation for all configuration options:</span><span class="w"></span>
<span class="c1"># https://docs.github.com/github/administering-a-repository/configuration-options-for-dependency-updates</span><span class="w"></span>

<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="nt">updates</span><span class="p">:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package-ecosystem</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pip&quot;</span><span class="w"> </span><span class="c1"># See documentation for possible values</span><span class="w"></span>
<span class="w">    </span><span class="nt">directory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/requirements&quot;</span><span class="w"> </span><span class="c1"># Location of package manifests</span><span class="w"></span>
<span class="w">    </span><span class="nt">schedule</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>This file should be located in the <code class="docutils literal notranslate"><span class="pre">.github</span></code> folder of your repository for
GitHub to detect it automatically. As it can be seen there are several main options:</p>
<ul class="simple">
<li><p><strong>package-ecosystem</strong>: which lets Dependabot know what your package manager is.
PyAnsys projects typically use <code class="docutils literal notranslate"><span class="pre">pip</span></code>, but another example could be <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p></li>
<li><p><strong>directory</strong>: which lets Dependabot where your requirement files are located.
PyAnsys projects typically contain all their requirements inside a <code class="docutils literal notranslate"><span class="pre">requirements</span></code>
folder. Other directories could be provided.</p></li>
<li><p><strong>schedule</strong>: which lets Dependabot know the frequency at which its subroutines
should be performed for checking for updates.</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>At the moment, Dependabot only works for requirement files. Support for <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>
and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files is not yet enabled, as it can be seen in this issue
opened some time ago: <a class="reference external" href="https://github.com/dependabot/dependabot-core/issues/3290">Standard Python support</a>.
While this feature is still coming, remember to update whatever dependencies are
defined in other package configuration files <strong>by hand</strong>.</p>
</div>
</section>
<section id="dependabot-updates">
<h3>Dependabot updates<a class="headerlink" href="#dependabot-updates" title="Permalink to this headline">#</a></h3>
<p>Dependabot determines (using semantic versioning) whether a requirement should
be updated due to the existence of a newer version. When Dependabot identifies
an outdated dependency, it raises a Pull Request to update these requirement
files.</p>
<p>Dependabot allows for two different types of updates:</p>
<ul class="simple">
<li><p><strong>Dependabot security updates</strong>: automated pull requests that help update
dependencies with known vulnerabilities.</p></li>
<li><p><strong>Dependabot version updates</strong>: automated pull requests that keep dependencies updated,
even when they don’t have any vulnerabilities. To check the status of version updates,
navigate to the <code class="docutils literal notranslate"><span class="pre">Insights</span></code> tab of your repository, then <code class="docutils literal notranslate"><span class="pre">Dependency</span> <span class="pre">Graph</span></code>,
and <code class="docutils literal notranslate"><span class="pre">Dependabot</span></code>.</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Dependabot only works for <em>pinned-down</em> versions of requirements (or, at most, versions
with an <em>upper-limits</em> requirement such as <code class="docutils literal notranslate"><span class="pre">pyvista</span> <span class="pre">&lt;=</span> <span class="pre">0.34.0</span></code>). However, this is not
a best practice for <em>run-time</em> dependencies (that is, the usage of a package should support
the oldest available version, if possible). Thus, it is only recommended to fully pin
<strong>documentation</strong> and <strong>testing</strong> requirements (that is, using <code class="docutils literal notranslate"><span class="pre">==</span></code>). Having the latest
dependencies available in your requirements <strong>testing</strong>  files allows to test the
<em>latest</em> packages against your library.</p>
</div>
</section>
<section id="dependabot-version-updates">
<h3>Dependabot version updates<a class="headerlink" href="#dependabot-version-updates" title="Permalink to this headline">#</a></h3>
<p>In order to enable version updates for your repository, please go to
<a class="reference external" href="https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuring-dependabot-version-updates#enabling-dependabot-version-updates">Enabling Dependabot version updates</a>.</p>
</section>
<section id="dependabot-security-updates">
<h3>Dependabot security updates<a class="headerlink" href="#dependabot-security-updates" title="Permalink to this headline">#</a></h3>
<p>Dependabot security updates make it easier for you to fix vulnerable dependencies in your
repository. If you enable this feature, when a Dependabot alert is raised for a vulnerable
dependency in the dependency graph of your repository, Dependabot automatically tries to fix it.</p>
<p>In order to enable security updates and notifications for your repository, please go to
<a class="reference external" href="https://docs.github.com/en/code-security/dependabot/dependabot-security-updates/configuring-dependabot-security-updates#enabling-or-disabling-dependabot-security-updates-for-an-individual-repository">Enabling or disabling Dependabot security updates for an individual repository</a>.</p>
</section>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>