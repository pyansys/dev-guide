
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Code style tools &#8212; PyAnsys Developer&#39;s Guide</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/ansys_sphinx_theme.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Required standards" href="required-standard.html" />
    <link rel="prev" title="PEP 8" href="pep8.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../overview/index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../how-to/index.html">
  How-To
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../packaging/index.html">
  Packaging style
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Coding style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../doc-style/index.html">
  Documentation style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../abstractions/index.html">
  Abstractions
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/dev-guide" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnsys Developer's Guide</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Coding style</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Code style tools</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="pep8.html">
   PEP 8
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Code style tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="required-standard.html">
   Required standards
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#black">
   Black
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#isort">
   Isort
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flake8">
   Flake8
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-coverage">
   Code coverage
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-commit">
   Pre-commit
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installing-pre-commit">
     Installing
     <code class="docutils literal notranslate">
      <span class="pre">
       pre-commit
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-pre-commit">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       pre-commit
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tox">
   Tox
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installing-tox">
     Installing
     <code class="docutils literal notranslate">
      <span class="pre">
       tox
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-tox">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       tox
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="code-style-tools">
<h1>Code style tools<a class="headerlink" href="#code-style-tools" title="Permalink to this headline">#</a></h1>
<p>There are many tools for checking code style. This section presents some of
the most popular ones in the Python ecosystem. A minimum configuration is
provided for each one so that you can easily include them in your PyAnsys project.</p>
<p>Most of the tools presented can be configured using <a class="reference internal" href="../packaging/structure.html#the-pyproject-toml-file"><span class="std std-ref">The pyproject.toml file</span></a>. Avoiding dotfiles leads to a much
cleaner root project directory.</p>
<section id="black">
<h2>Black<a class="headerlink" href="#black" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://black.readthedocs.io/en/latest/">Black</a> is the most popular code formatter in the Python community because it is
maintained by the Python Software Foundation. It allows for a minimum
configuration to ensure that the Python code format looks almost the same across
projects.</p>
<p>While <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> imposes a default line length of 79 characters, <a class="reference external" href="https://black.readthedocs.io/en/latest/">black</a> has
a default line length of 88 characters.</p>
<p>The minimum <a class="reference external" href="https://black.readthedocs.io/en/latest/">black</a> configuration for a PyAnsys project should look like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.black]</span><span class="w"></span>
<span class="n">line-length</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;length&gt;&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="isort">
<h2>Isort<a class="headerlink" href="#isort" title="Permalink to this headline">#</a></h2>
<p>The goal of <a class="reference external" href="https://pycqa.github.io/isort/">isort</a>  is to properly format <code class="docutils literal notranslate"><span class="pre">import</span></code> statements by making sure
that they follow the standard order: library, third-party libraries, and custom libraries.</p>
<p>When using <a class="reference external" href="https://pycqa.github.io/isort/">isort</a> with <a class="reference external" href="https://black.readthedocs.io/en/latest/">black</a>, it is important to properly configure both
tools so that no conflicts arise. To accomplish this, use the
<code class="docutils literal notranslate"><span class="pre">--profile</span> <span class="pre">black</span></code> flag in <a class="reference external" href="https://pycqa.github.io/isort/">isort</a>.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.isort]</span><span class="w"></span>
<span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;black&quot;</span><span class="w"></span>
<span class="n">force_sort_within_sections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="n">line_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;length&gt;&quot;</span><span class="w"></span>
<span class="n">default_section</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;THIRDPARTY&quot;</span><span class="w"></span>
<span class="n">src_paths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;doc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;src&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tests&quot;</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="flake8">
<h2>Flake8<a class="headerlink" href="#flake8" title="Permalink to this headline">#</a></h2>
<p>The goal of <cite>flake8</cite> is to act as a <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> compliance checker. Again, if
this tool is being used with <a class="reference external" href="https://black.readthedocs.io/en/latest/">black</a>, it is important to make sure that no
conflicts arise.</p>
<p>The following configuration is the minimum one to set up <a class="reference external" href="https://flake8.pycqa.org/en/latest/">flake8</a> together with
<a class="reference external" href="https://black.readthedocs.io/en/latest/">black</a>.</p>
<p>The configuration for <a class="reference external" href="https://flake8.pycqa.org/en/latest/">flake8</a> must be specified in a <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> file.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[flake8]</span><span class="w"></span>
<span class="n">max-line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span><span class="w"></span>
<span class="n">extend-ignore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E203</span><span class="w"></span>
</pre></div>
</div>
<p>Flake8 has many options that can be set within the configuration file.
For more information, see this <a class="reference external" href="https://flake8.pycqa.org/en/latest/user/options.html">Flake8 documentation topic</a>.</p>
<p>The example configuration defines these options:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">exclude</span></code></dt><dd><p>Subdirectories and files to exclude when checking.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">select</span></code></dt><dd><p>Sequence of error codes that Flake8 is to report errors
for. The set in the preceding configuration is a basic set of errors
for checking and is not an exhaustive list.</p>
<p>For a full list of error codes and their descriptions, see this <a class="reference external" href="https://flake8.pycqa.org/en/3.9.2/user/error-codes.html">Flake8
documentation topic</a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">count</span></code></dt><dd><p>Total number of errors to print when checking ends.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">max-complexity</span></code></dt><dd><dl class="simple">
<dt>Maximum allowed McCabe complexity value for a block of code.</dt><dd><p>The value of 10 was chosen because it is a common default.</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">statistics</span></code></dt><dd><p>Number of occurrences of each error or warning code
to print as a report when checking ends.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="code-coverage">
<h2>Code coverage<a class="headerlink" href="#code-coverage" title="Permalink to this headline">#</a></h2>
<p>Code coverage indicates the percentage of the codebase tested by the test
suite. Code coverage should be as high as possible to guarantee that every piece
of code has been tested.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">PyAnsys</span></code>, code coverage is done using <a class="reference external" href="https://pytest-cov.readthedocs.io/en/latest/">pytest-cov</a>, a <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> plugin
that triggers the code coverage analysis once your test suite has executed.</p>
<p>Considering the layout presented in <a class="reference internal" href="../packaging/structure.html#required-files"><span class="std std-ref">Required files</span></a>, the following
configuration for code coverage is the minimum one required for a <code class="docutils literal notranslate"><span class="pre">PyAnsys</span></code>
project:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.coverage.run]</span><span class="w"></span>
<span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;ansys.&lt;product&gt;&quot;</span><span class="p">]</span><span class="w"></span>

<span class="k">[tool.coverage.report]</span><span class="w"></span>
<span class="n">show_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="pre-commit">
<h2>Pre-commit<a class="headerlink" href="#pre-commit" title="Permalink to this headline">#</a></h2>
<p>To ensure that every commit you make is compliant with the code style
guidelines for PyAnsys, you can take advantage of <a class="reference external" href="https://pre-commit.com/">pre-commit</a> in your project.
Every time you stage some changes and try to commit them, <a class="reference external" href="https://pre-commit.com/">pre-commit</a> only
allows them to be committed if all defined hooks succeed.</p>
<p>The configuration for <a class="reference external" href="https://pre-commit.com/">pre-commit</a> must be defined in a
<code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> file. The following lines present a minimum
<a class="reference external" href="https://pre-commit.com/">pre-commit</a> configuration that includes both code and documentation
formatting tools.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">repos</span><span class="p">:</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/psf/black</span><span class="w"></span>
<span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X.Y.Z</span><span class="w"></span>
<span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">black</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pycqa/isort</span><span class="w"></span>
<span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X.Y.Z</span><span class="w"></span>
<span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">isort</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/PyCQA/flake8</span><span class="w"></span>
<span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X.Y.Z</span><span class="w"></span>
<span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flake8</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/codespell-project/codespell</span><span class="w"></span>
<span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vX.Y.Z</span><span class="w"></span>
<span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">codespell</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pycqa/pydocstyle</span><span class="w"></span>
<span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">X.Y.Z</span><span class="w"></span>
<span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pydocstyle</span><span class="w"></span>
<span class="w">    </span><span class="nt">additional_dependencies</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">toml</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="nt">exclude</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tests/&quot;</span><span class="w"></span>
</pre></div>
</div>
<section id="installing-pre-commit">
<h3>Installing <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code><a class="headerlink" href="#installing-pre-commit" title="Permalink to this headline">#</a></h3>
<p>You can install <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install pre-commit
</pre></div>
</div>
<p>Then, ensure that you install it as a <code class="docutils literal notranslate"><span class="pre">Git</span> <span class="pre">hook</span></code> by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit install
</pre></div>
</div>
</section>
<section id="using-pre-commit">
<h3>Using <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code><a class="headerlink" href="#using-pre-commit" title="Permalink to this headline">#</a></h3>
<p>One installed as described, <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> automatically triggers every time
that you try to commit a change. If any hook defined in <cite>.pre-commit-config.yaml</cite>
fails, you must fix the failing files, stage the new changes, and try to commit
them again.</p>
<p>If you want to manually run <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code>, you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit run --all-files --show-diff-on-failure
</pre></div>
</div>
<p>This command shows the current and expected style of the code if any of
the hooks fail.</p>
</section>
</section>
<section id="tox">
<h2>Tox<a class="headerlink" href="#tox" title="Permalink to this headline">#</a></h2>
<p>You might consider using <a class="reference external" href="https://tox.wiki/en/latest/">tox</a> in your project. While this automation
tool is similar to <a class="reference external" href="https://www.gnu.org/software/make/">Make</a>, it supports testing of your package in a temporary
virtual environment. Being able to test your package in isolation rather than in
“local” mode guarantees reproducible builds.</p>
<p>Configuration for <a class="reference external" href="https://tox.wiki/en/latest/">tox</a> is stored in a <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> file. The minimum
configuration for a PyAnsys <code class="docutils literal notranslate"><span class="pre">py&lt;product&gt;-&lt;library&gt;</span></code> project should be:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Tox with Flit</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Tox with Poetry</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tox]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Default tox environments list</span><span class="w"></span>
<span class="na">envlist</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">style,{py37,py38,py39,py310}{,-coverage},doc</span><span class="w"></span>
<span class="na">skip_missing_interpreters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">isolated_build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">isolated_build_env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">build</span><span class="w"></span>

<span class="k">[testenv]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Checks for project unit tests and coverage (if desired)</span><span class="w"></span>
<span class="na">basepython</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">py37: python3.7</span><span class="w"></span>
<span class="w">    </span><span class="na">py38: python3.8</span><span class="w"></span>
<span class="w">    </span><span class="na">py39: python3.9</span><span class="w"></span>
<span class="w">    </span><span class="na">py310: python3.10</span><span class="w"></span>
<span class="w">    </span><span class="na">py: python3</span><span class="w"></span>
<span class="w">    </span><span class="na">{style,reformat,doc,build}: python3</span><span class="w"></span>
<span class="na">setenv</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">PYTHONUNBUFFERED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">yes</span><span class="w"></span>
<span class="w">    </span><span class="na">coverage: PYTEST_EXTRA_ARGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--cov=ansys.product --cov-report=term --cov-report=xml --cov-report=html</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">-r{toxinidir}/requirements/requirements_tests.txt</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">pytest {env:PYTEST_MARKERS:} {env:PYTEST_EXTRA_ARGS:} {posargs:-vv}</span><span class="w"></span>

<span class="k">[testenv:style]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Checks project code style</span><span class="w"></span>
<span class="na">skip_install</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit install</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit run --all-files --show-diff-on-failure</span><span class="w"></span>

<span class="k">[testenv:doc]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Check if documentation generates properly</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">-r{toxinidir}/requirements/requirements_doc.txt</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">sphinx-build -d &quot;{toxworkdir}/doc_doctree&quot; doc/source &quot;{toxworkdir}/doc_out&quot; --color -vW -bhtml</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tox]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Default tox environments list</span><span class="w"></span>
<span class="na">envlist</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">style,{py37,py38,py39,py310}{,-coverage},doc</span><span class="w"></span>
<span class="na">skip_missing_interpreters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">isolated_build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>

<span class="k">[testenv]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Checks for project unit tests and coverage (if desired)</span><span class="w"></span>
<span class="na">basepython</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">py37: python3.7</span><span class="w"></span>
<span class="w">    </span><span class="na">py38: python3.8</span><span class="w"></span>
<span class="w">    </span><span class="na">py39: python3.9</span><span class="w"></span>
<span class="w">    </span><span class="na">py310: python3.10</span><span class="w"></span>
<span class="w">    </span><span class="na">py: python3</span><span class="w"></span>
<span class="w">    </span><span class="na">{style,reformat,doc,build}: python3</span><span class="w"></span>
<span class="na">skip_install</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">whitelist_externals</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">poetry</span><span class="w"></span>
<span class="na">setenv</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">PYTHONUNBUFFERED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">yes</span><span class="w"></span>
<span class="w">    </span><span class="na">coverage: PYTEST_EXTRA_ARGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--cov=ansys.product --cov-report=term --cov-report=xml --cov-report=html</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">-r{toxinidir}/requirements/requirements_tests.txt</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">poetry install</span><span class="w"></span>
<span class="w">    </span><span class="na">poetry run pytest {env:PYTEST_MARKERS:} {env:PYTEST_EXTRA_ARGS:} {posargs:-vv}</span><span class="w"></span>

<span class="k">[testenv:style]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Checks project code style</span><span class="w"></span>
<span class="na">skip_install</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit install</span><span class="w"></span>
<span class="w">    </span><span class="na">pre-commit run --all-files --show-diff-on-failure</span><span class="w"></span>

<span class="k">[testenv:doc]</span><span class="w"></span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Check if documentation generates properly</span><span class="w"></span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">-r{toxinidir}/requirements/requirements_doc.txt</span><span class="w"></span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">poetry run sphinx-build -d &quot;{toxworkdir}/doc_doctree&quot; doc/source &quot;{toxworkdir}/doc_out&quot; --color -vW -bhtml</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>This minimum configuration assumes that you have a <code class="docutils literal notranslate"><span class="pre">requirements/</span></code> directory that
contains <code class="docutils literal notranslate"><span class="pre">requirements_tests.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">requirements_doc.txt</span></code>. In
addition, the <code class="docutils literal notranslate"><span class="pre">style</span></code> environment must execute <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code>, which guarantees
the usage of this tool in your project.</p>
<section id="installing-tox">
<h3>Installing <code class="docutils literal notranslate"><span class="pre">tox</span></code><a class="headerlink" href="#installing-tox" title="Permalink to this headline">#</a></h3>
<p>You can install <code class="docutils literal notranslate"><span class="pre">tox</span></code> like any other Python package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install tox
</pre></div>
</div>
</section>
<section id="using-tox">
<h3>Using <code class="docutils literal notranslate"><span class="pre">tox</span></code><a class="headerlink" href="#using-tox" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://tox.wiki/en/latest/">tox</a> uses <code class="docutils literal notranslate"><span class="pre">environments</span></code>, which are similar to <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> rules,
to make it highly customizable. Descriptions follow of some of the most
widely used environments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">style</span></code> checks the code style of your project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">py</span></code> runs your test suite.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">doc</span></code> builds the documentation of your project.</p></li>
</ul>
<p>It is possible to run multiple environments by separating them with commas <code class="docutils literal notranslate"><span class="pre">tox</span>
<span class="pre">-e</span> <span class="pre">&lt;env-name0&gt;,&lt;env-name1&gt;,...`</span></code>.  To run all available environments, simply
run <code class="docutils literal notranslate"><span class="pre">tox</span></code>.</p>
</section>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>