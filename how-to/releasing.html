
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Releasing and publishing &#8212; PyAnsys Developer&#39;s Guide</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/ansys_sphinx_theme.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Repository protection" href="repository-protection.html" />
    <link rel="prev" title="Using continuous integration" href="continuous-integration.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../overview/index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  How-To
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../packaging/index.html">
  Packaging style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../coding-style/index.html">
  Coding style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../doc-style/index.html">
  Documentation style
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../abstractions/index.html">
  Abstractions
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/dev-guide" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyAnsys Developer's Guide</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">How-To</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Releasing and publishing</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="setting-up.html">
   Setting up your development environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="supporting-python-versions.html">
   Supporting Python versions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="packaging.html">
   Packaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="logging.html">
   Logging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="documenting.html">
   Documenting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="testing.html">
   Testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="continuous-integration.html">
   Using continuous integration
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Releasing and publishing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="repository-protection.html">
   Repository protection
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#semantic-versioning">
   Semantic versioning
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#branching-model">
   Branching model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#releasing-major-and-minor-versions">
   Releasing major and minor versions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#releasing-patched-versions">
   Releasing patched versions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publishing-artifacts">
   Publishing artifacts
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-privately-on-pypi">
     Publishing privately on PyPI
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upload">
       Upload
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#download">
       Download
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-to-pypi">
     Publishing to PyPI
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#initially-publishing-to-pypi">
       Initially publishing to PyPI
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#republishing-to-pypi">
       Republishing to PyPI
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-to-github">
     Publishing to GitHub
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automating-the-release-process">
   Automating the release process
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="releasing-and-publishing">
<h1>Releasing and publishing<a class="headerlink" href="#releasing-and-publishing" title="Permalink to this headline">#</a></h1>
<p>Releasing a new version is a critical procedure. It should be automated as much as
possible to avoid human error.</p>
<p>This sections explains in detail the <a class="reference internal" href="setting-up.html#git"><span class="std std-ref">Git</span></a> workflow to be followed together
with the different steps that developers need to follow to create a successful
release.</p>
<section id="semantic-versioning">
<h2>Semantic versioning<a class="headerlink" href="#semantic-versioning" title="Permalink to this headline">#</a></h2>
<p>PyAnsys library releases are managed through both automated and manual review
processes.</p>
<p>PyAnsys follows the <a class="reference external" href="https://semver.org/">Semantic Versioning</a>, which produces release names in the
form of <code class="docutils literal notranslate"><span class="pre">X.Y.Z</span></code>, where each letter corresponds to an integer value. This
notation can also be understand as <code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR.PATCH</span></code>:</p>
<ul class="simple">
<li><p><strong>Major</strong> version when you make incompatible API changes.</p></li>
<li><p><strong>Minor</strong> version when you add a feature in a backwards-compatible manner.</p></li>
<li><p><strong>Patch</strong> version when you make backwards compatible bug fixes.</p></li>
</ul>
<p>One exception exists. <code class="docutils literal notranslate"><span class="pre">MAJOR</span></code> versions are not expected to be regularly released
when any incompatible API changes are made. They are only expected to be
released with major, globally breaking API changes. This matches the versioning
methodology for the “big three” data science Python libraries: <a class="reference external" href="https://numpy.org/">NumPy</a>,
<a class="reference external" href="https://www.scipy.org/">SciPy</a>, and <a class="reference external" href="https://pandas.pydata.org/">pandas</a>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">0.MINOR.PATCH</span></code> packages are expected to have fluid APIs and should
be solidified at the <code class="docutils literal notranslate"><span class="pre">1.MINOR.PATCH</span></code> release. At that point, APIs are expected
to be much more stable.</p>
<div class="admonition-pyansys-libraries-should-not-match-product-versions admonition">
<p class="admonition-title">PyAnsys libraries should not match product versions.</p>
<p>For example, the PyMAPDL library <code class="docutils literal notranslate"><span class="pre">ansys-mapdl-core</span></code> might have the version
<code class="docutils literal notranslate"><span class="pre">0.59.0</span></code> whereas the product version is 21.2 (2021 R2). The reason behind
this is PyAnsys libraries are expected to be developed outside the product
release cycle in a rapid CI/CD manner.</p>
</div>
</section>
<section id="branching-model">
<h2>Branching model<a class="headerlink" href="#branching-model" title="Permalink to this headline">#</a></h2>
<p>The branching model for a PyAnsys project enables rapid development of
features without sacrificing stability. The model closely follows the
<a class="reference external" href="https://trunkbaseddevelopment.com/">Trunk Based Development</a> approach:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">main</span></code> branch is the primary development branch. All features,
patches, and other branches should be merged here. While all PRs
should pass all applicable CI checks, this branch might be functionally
unstable if changes have introduced unintended side effects or bugs
that were not caught through unit testing. The version is always suffixed
with <code class="docutils literal notranslate"><span class="pre">.dev0</span></code> in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
<figure class="align-center" id="id4">
<div class="graphviz"><img src="../_images/graphviz-eca9437f1f863b99c877c98b74127d365e5de91f.png" alt="The main branch is the primary development branch." class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">The main branch is the primary development branch.</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>When a minor release candidate is ready, a new <code class="docutils literal notranslate"><span class="pre">release</span></code> branch is
created from <code class="docutils literal notranslate"><span class="pre">main</span></code> with the next incremented minor version
(for example, <code class="docutils literal notranslate"><span class="pre">release/0.2</span></code>). This <code class="docutils literal notranslate"><span class="pre">release</span></code> branch is thoroughly
tested. When deemed stable, it is tagged with the version (<code class="docutils literal notranslate"><span class="pre">0.2.0</span></code>
in this case). Older release branches should not be deleted so that they can be
patched as needed.</p></li>
<li><p>There is one or more <code class="docutils literal notranslate"><span class="pre">release/</span></code> branches based on minor releases (for
example, <code class="docutils literal notranslate"><span class="pre">release/0.2</span></code>) that contain a stable version of the code base that
is also reflected on PyPI. Hotfixes from <code class="docutils literal notranslate"><span class="pre">fix/</span></code> branches should be
integrated both to <code class="docutils literal notranslate"><span class="pre">main</span></code> and to these branches. When creating a new patch
release is necessary, these release branches have their version updated
and are tagged with a patched <a class="reference internal" href="#semantic-versioning"><span class="std std-ref">Semantic versioning</span></a> (for example,
<code class="docutils literal notranslate"><span class="pre">0.2.1</span></code>).  This triggers CI to push to PyPI so that hotfixes for past
versions can be rapidly push without having to worry about untested features.</p>
<figure class="align-center" id="id5">
<div class="graphviz"><img src="../_images/graphviz-063eaec166626f16a0324b89dcf35aff469fd034.png" alt="Release branches are created based on minor releases." class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Release branches are created based on minor releases.</span><a class="headerlink" href="#id5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
</ul>
</section>
<section id="releasing-major-and-minor-versions">
<h2>Releasing major and minor versions<a class="headerlink" href="#releasing-major-and-minor-versions" title="Permalink to this headline">#</a></h2>
<p>When creating a new major or minor version, ensure your <code class="docutils literal notranslate"><span class="pre">origin</span> <span class="pre">main</span></code> branch is
up to date with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout main &amp;&amp; git fetch origin main &amp;&amp; git rebase origin/main
</pre></div>
</div>
<p>If you encounter any issues when running previous command, solve those before
continuing with the release. Ensure that your style, tests, and documentation
checks are passing too.</p>
<p>Create a new branch for the version you want to release with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout -b release/X.Y
</pre></div>
</div>
<p>Update <code class="docutils literal notranslate"><span class="pre">X</span></code> or <code class="docutils literal notranslate"><span class="pre">Y</span></code> version numbers in your project and replace the <code class="docutils literal notranslate"><span class="pre">dev0</span></code>
with a <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Check all locations, including
<a class="reference internal" href="../packaging/structure.html#the-setup-py-file"><span class="std std-ref">The setup.py file</span></a>, <a class="reference internal" href="../packaging/structure.html#the-pyproject-toml-file"><span class="std std-ref">The pyproject.toml file</span></a>, and any
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> or <code class="docutils literal notranslate"><span class="pre">__version__.py</span></code> your project may contain.</p>
<p>Stash and commit previous changes with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git add . &amp;&amp; git commit -m &quot;Bump version X.Y.0&quot;
</pre></div>
</div>
<p>Tag the previous commit with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git tag vX.Y.0
</pre></div>
</div>
<p>Push the commit and the tag with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git push -u origin release/X.Y &amp;&amp; git push origin vX.Y.0
</pre></div>
</div>
</section>
<section id="releasing-patched-versions">
<h2>Releasing patched versions<a class="headerlink" href="#releasing-patched-versions" title="Permalink to this headline">#</a></h2>
<p>Patched versions allow you to fix issues discovered in published releases by
cherry-picking these fixes from the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
<p>To create a patched version, you must first identify which <code class="docutils literal notranslate"><span class="pre">release/X.Y</span></code>
branch it belongs to. Then, ensure your local <code class="docutils literal notranslate"><span class="pre">release/X.Y</span></code> is up to date
with the origin one because other patched versions may have been introduced.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout release/X.Y &amp;&amp; git fetch origin release/X.Y &amp;&amp; git rebase origin/release/X.Y
</pre></div>
</div>
<p>If you encounter any issues when running this command, solve them before
continuing with the release.</p>
<p>Now, <a class="reference external" href="https://git-scm.com/docs/git-cherry-pick">cherry-pick</a> the fix commit
from <code class="docutils literal notranslate"><span class="pre">main</span></code>, which solves for the bug. Do not merge changes from <code class="docutils literal notranslate"><span class="pre">main</span></code> into the
release branch. Always cherry-pick them.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git cherry-pick &lt;commit hash&gt;
</pre></div>
</div>
<p>Ensure that your style, tests, and documentation checks are also passing.</p>
<p>Increase by one unit the value of <code class="docutils literal notranslate"><span class="pre">Z</span></code> in your project version. Stash and
amend these new changes with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git add . &amp;&amp; git commit --amend -m &quot;Bump version X.Y.Z&quot;
</pre></div>
</div>
<p>Tag the previous commit with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git tag vX.Y.Z
</pre></div>
</div>
<p>Push the commit and the tag with:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git push -u origin release/X.Y &amp;&amp; git push origin vX.Y.Z
</pre></div>
</div>
</section>
<section id="publishing-artifacts">
<h2>Publishing artifacts<a class="headerlink" href="#publishing-artifacts" title="Permalink to this headline">#</a></h2>
<p>When a new version is released, some artifacts are provided with it. In Python,
these <a class="reference internal" href="../packaging/build-systems.html#artifacts"><span class="std std-ref">Artifacts</span></a> are typically the <code class="docutils literal notranslate"><span class="pre">Wheel</span></code> and <code class="docutils literal notranslate"><span class="pre">Source</span></code> files.
Documentation in the form of PDF and HTML files are also considered artifacts.</p>
<div class="admonition-do-not-distribute-artifacts-without-approval admonition">
<p class="admonition-title">Do not distribute artifacts without approval.</p>
<p>For more information about requesting approval for publishing your project,
see <a class="reference internal" href="../overview/administration.html#project-approval"><span class="std std-ref">Project approval</span></a>.</p>
</div>
<p>Manual release processes are discouraged and should be avoided. Automated
release processes minimize human-error and alleviate workload on teams. For more
information, see :ref: <cite>Automating Release Process</cite>.</p>
<section id="publishing-privately-on-pypi">
<h3>Publishing privately on PyPI<a class="headerlink" href="#publishing-privately-on-pypi" title="Permalink to this headline">#</a></h3>
<p>It is sometimes necessary to host and pull packages that are not ready to be
hosted on the public <a class="reference external" href="https://pypi.org/">PyPI</a>. For example, if a PyAnsys library requires
auto-generated gRPC’ interface files from a feature or service that is still
private, this package should be hosted on a private PyPI repository.</p>
<p>ANSYS, Inc. has a private repository at <a class="reference external" href="https://pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi">PyAnsys PyPI</a>. Access is controlled
via a <code class="docutils literal notranslate"><span class="pre">Personal</span> <span class="pre">Access</span> <span class="pre">Token</span> <span class="pre">(PAT)</span></code> and a <code class="docutils literal notranslate"><span class="pre">PYANSYS_PYPI_PRIVATE_PAT</span></code>
password in the form of a GitHub secret which is available only to repositories
within <a class="reference external" href="https://github.com/pyansys">PyAnsys</a>.</p>
<div class="admonition-a-note-on-secrets-access-in-forked-repositories admonition">
<p class="admonition-title">A note on secrets access in forked repositories</p>
<p>Forked GitHub repositories do not have access to GitHub secrets. This is
designed to protect against PRs that could potentially scrape tokens from
PyAnsys CI/CD.</p>
</div>
<section id="upload">
<h4>Upload<a class="headerlink" href="#upload" title="Permalink to this headline">#</a></h4>
<p>You can upload packages to the private repository with the following short bash
script. If you are operating out of a GitHub CI pipeline, email the PyAnsys Core
team at <a class="reference external" href="mailto:pyansys&#46;core&#37;&#52;&#48;ansys&#46;com">pyansys<span>&#46;</span>core<span>&#64;</span>ansys<span>&#46;</span>com</a> for the
required <code class="docutils literal notranslate"><span class="pre">PAT</span></code> user name and <code class="docutils literal notranslate"><span class="pre">PYANSYS_PYPI_PRIVATE_PAT</span></code> password.</p>
<p>Assuming that you are already in a Python repository’s <code class="docutils literal notranslate"><span class="pre">dist/</span></code> directory that
contains your wheel, source distribution, or both, you can upload to the private
repository with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U pip build twine

<span class="nv">REPOSITORY_URL</span><span class="o">=</span><span class="s2">&quot;https://pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi/upload&quot;</span>
python -m twine upload dist/* <span class="se">\</span>
  -p <span class="si">${</span><span class="p">{ secrets.PYANSYS_PYPI_PRIVATE_PAT </span><span class="si">}</span><span class="o">}</span> <span class="se">\</span>
  -u PAT <span class="se">\</span>
  --repository-url <span class="nv">$REPOSITORY_URL</span>
</pre></div>
</div>
<p>Alternatively, instead of command-line tool arguments for Twine, you can use environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export TWINE_USERNAME=PAT
export TWINE_PASSWORD=$PYANSYS_PYPI_PRIVATE_PAT
export TWINE_REPOSITORY_URL=&quot;https://pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi/upload&quot;

python -m twine upload dist/*
</pre></div>
</div>
</section>
<section id="download">
<h4>Download<a class="headerlink" href="#download" title="Permalink to this headline">#</a></h4>
<p>You can download a Python package from <a class="reference external" href="https://pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi">PyAnsys PyPI</a> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INDEX_URL=https://$PYANSYS_PYPI_PRIVATE_PAT@pkgs.dev.azure.com/pyansys/_packaging/pyansys/pypi/simple/
pip install ansys-&lt;product/tool&gt;-&lt;library&gt; --index-url $INDEX_URL --no-dependencies
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A read-only PAT is available for users who need only to download the package. It
can be stored as an environment variable and be used as described in the preceding code example.
To get access to this PAT, email the PyAnsys Core team at <cite>pyansys.core&#64;ansys.com &lt;pyansys.core&#64;ansys.com&gt;</cite>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Take care to always use the <code class="docutils literal notranslate"><span class="pre">--index-url</span></code> switch rather than the
<code class="docutils literal notranslate"><span class="pre">--extra-index-url</span></code> switch. As noted in <a class="reference external" href="https://pip.pypa.io/en/stable/cli/pip_install/">pip Documentation</a>, the
<code class="docutils literal notranslate"><span class="pre">--index-url</span></code> switch changes the Python Package Index, which forces <code class="docutils literal notranslate"><span class="pre">pip</span></code>
to use only packages from that package index.</p>
<p>The Ansys package index uses PyPI upstream. This prevents other users from being able to
inject packages from PyPI that would supersede Ansys packages, even if they
are of a higher version.</p>
<p>This is not the case if you use <code class="docutils literal notranslate"><span class="pre">--extra-index-url</span></code>, which adds to rather
than replaces the default package index. For security, do not use
<code class="docutils literal notranslate"><span class="pre">--extra-index-url</span></code>.</p>
</div>
</section>
</section>
<section id="publishing-to-pypi">
<h3>Publishing to PyPI<a class="headerlink" href="#publishing-to-pypi" title="Permalink to this headline">#</a></h3>
<p>Publishing <a class="reference internal" href="../packaging/build-systems.html#artifacts"><span class="std std-ref">Artifacts</span></a> to <a class="reference external" href="https://pypi.org/">PyPI</a> is the way of distributing <a class="reference internal" href="../packaging/structure.html#python-libraries"><span class="std std-ref">Python libraries</span></a>. Publishing to <a class="reference external" href="https://pypi.org/">PyPI</a> requires a <code class="docutils literal notranslate"><span class="pre">PYPI_TOKEN</span></code> for your project. To
generate and get access to this token:</p>
<ul class="simple">
<li><p>Contact <a class="reference external" href="mailto:alexander&#46;kaszynski&#37;&#52;&#48;ansys&#46;com">Alexander Kaszynski</a>
requesting access to the <code class="docutils literal notranslate"><span class="pre">PYPI_TOKEN</span></code>. The value of this token depends
on whether you are <a class="reference internal" href="#initially-publishing-to-pypi"><span class="std std-ref">Initially publishing to PyPI</span></a> or <a class="reference internal" href="#republishing-to-pypi"><span class="std std-ref">Republishing to PyPI</span></a>.</p></li>
<li><p>Add this token to the <code class="docutils literal notranslate"><span class="pre">Secrets/Actions</span></code> section in your repository.</p></li>
</ul>
<section id="initially-publishing-to-pypi">
<h4>Initially publishing to PyPI<a class="headerlink" href="#initially-publishing-to-pypi" title="Permalink to this headline">#</a></h4>
<p>If it is the first time that you are publishing your project to <a class="reference external" href="https://pypi.org/">PyPI</a>,
you must obtain the global <code class="docutils literal notranslate"><span class="pre">PYPI_TOKEN</span></code> for the <a class="reference external" href="https://github.com/pyansys">PyAnsys</a> user in
<cite>PyPI</cite> by contacting <a class="reference external" href="mailto:alexander&#46;kaszynski&#37;&#52;&#48;ansys&#46;com">Alexander Kaszynski</a>.</p>
</section>
<section id="republishing-to-pypi">
<h4>Republishing to PyPI<a class="headerlink" href="#republishing-to-pypi" title="Permalink to this headline">#</a></h4>
<p>If you are republishing your project to <cite>PyPI</cite>, you no longer need to have
the global <code class="docutils literal notranslate"><span class="pre">PYPI_TOKEN</span></code> but rather a unique project token. To
obtain your unique project token, contact <a class="reference external" href="mailto:alexander&#46;kaszynski&#37;&#52;&#48;ansys&#46;com">Alexander Kaszynski</a> or <a class="reference external" href="mailto:maxime&#46;rey&#37;&#52;&#48;ansys&#46;com">Maxime Rey</a>. Once you have received it,
update the token value in the <code class="docutils literal notranslate"><span class="pre">Secrets/Actions</span></code> section.</p>
</section>
</section>
<section id="publishing-to-github">
<h3>Publishing to GitHub<a class="headerlink" href="#publishing-to-github" title="Permalink to this headline">#</a></h3>
<p>Publishing <a class="reference internal" href="../packaging/build-systems.html#artifacts"><span class="std std-ref">Artifacts</span></a> to GitHub is also possible. These are available
in the <code class="docutils literal notranslate"><span class="pre">https://github.com/pyansys/project-name/releases</span></code> section.
Publishing <a class="reference internal" href="../packaging/build-systems.html#artifacts"><span class="std std-ref">Artifacts</span></a> into GitHub manually must be avoided to reduce
human-error. For more information, see <a class="reference internal" href="#automating-the-release-process"><span class="std std-ref">Automating the release process</span></a>.</p>
</section>
</section>
<section id="automating-the-release-process">
<h2>Automating the release process<a class="headerlink" href="#automating-the-release-process" title="Permalink to this headline">#</a></h2>
<p>Automating the release process is a good practice because it minimizes human error and
alleviates the developer’s workload.</p>
<p>The following GitHub Actions code is triggered every time a new <code class="docutils literal notranslate"><span class="pre">tag</span></code> gets pushed
to your project repository. This workflow depends on the success of the style, tests,
docs, and build workflows. For more information, see <a class="reference internal" href="continuous-integration.html#workflow-examples"><span class="std std-ref">Workflow examples</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI</span><span class="w"></span>
<span class="nt">on</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">workflow_run</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">workflows</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;style&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;tests&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;docs&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;build&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">completed</span><span class="w"></span>

<span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">MAIN_PYTHON_VERSION</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.9</span><span class="w"></span>

<span class="nt">concurrency</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.workflow }}-${{ github.ref }}</span><span class="w"></span>
<span class="w">  </span><span class="nt">cancel-in-progress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>

<span class="nt">jobs</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="nt">release</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Release</span><span class="w"></span>
<span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">      </span><span class="no">github.event_name == &#39;push&#39; &amp;&amp;</span><span class="w"></span>
<span class="w">      </span><span class="no">contains(github.ref, &#39;refs/tags&#39;) &amp;&amp; </span><span class="w"></span>
<span class="w">      </span><span class="no">github.event.workflow_run.conclusion == &#39;success&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span><span class="w"></span>
<span class="w">  </span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout repository</span><span class="w"></span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span><span class="w"></span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v2</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ env.MAIN_PYTHON_VERSION }}</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span><span class="w"></span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">          </span><span class="no">python -m pip install --upgrade pip build wine</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build artifacts</span><span class="w"></span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">          </span><span class="no">python -m build &amp;&amp; python -m twine check dist/*</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Publish to PyPI</span><span class="w"></span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">TWINE_USERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__token__</span><span class="w"></span>
<span class="w">          </span><span class="nt">TWINE_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.PYPI_TOKEN }}</span><span class="w"></span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">          </span><span class="no">python -m twine upload --skip-existing ./**/*.whl</span><span class="w"></span>
<span class="w">          </span><span class="no">python -m twine upload --skip-existing ./**/*.tar.gz</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Publish to GitHub</span><span class="w"></span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">softprops/action-gh-release@v1</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">            </span><span class="no">./**/*.whl</span><span class="w"></span>
<span class="w">            </span><span class="no">./**/*.tar.gz</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>